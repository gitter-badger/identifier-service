<dom-module id="id-value">

    <template>
        <style>
            .identifier-container {}
            .identifier-block {}
            .refresh {}
        </style>
        <div class="identifier-container">
            <div class="identifier-block">
                <pre id="id"><strong>[[value]]</strong></pre>
                <span class="refresh" on-click="refresh">
                    <img src="/images/refresh.svg" width="20px" height="20px"></img>
                </span>
            </div>
        </div>
    </template>

    <script>
        "use strict";
        HTMLImports.whenReady(function () {

            Polymer({
                is: 'id-value',

                properties: {
                    path: String,
                    value: String
                },

                attached: function() {
                    if (!this.value && this.path) {
                        this.refresh();
                    }
                },

                refresh: function() {
                    var httpRequest = new XMLHttpRequest();

                    if (!httpRequest) {
                        return false;
                    }

                    httpRequest.addEventListener('readystatechange', function () {
                        if (httpRequest.readyState == XMLHttpRequest.DONE ) {
                            if (httpRequest.status == 200) {
                                this.value = httpRequest.responseText;
                                this.$.id.classList.remove('copied');
                            }
                         }
                      }.bind(this));

                    httpRequest.open("GET", this.path, true);
                    httpRequest.setRequestHeader('Accept', 'text/plain');
                    httpRequest.send();
                }

              });

        });
    </script>

</dom-module>
